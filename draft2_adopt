<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adoption Form</title>

    <style>
      body {
        font-family: Oswald, sans-serif;
        margin: 20px;
        line-height: 1.6;
      }

      .tabs {
        display: flex;
        cursor: pointer;
        margin-bottom: 10px;
      }

      .tab {
        padding: 10px 20px;
        background-color: #f1f1f1;
        border: 1px solid #ccc;
        margin-right: 5px;
        border-radius: 4px;
      }

      .tab:hover {
        background-color: #ddd;
      }

      .tab.active {
        background-color: #e85b93;
        color: white;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      form {
        max-width: 600px;
        margin: auto;
      }

      h3 {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }

      input, select, textarea, button {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      button {
        background-color: #e85b93;
        color: white;
        cursor: pointer;
      }

      button:hover {
        background-color: #ec7ba8;
      }

      .form-row {
        display: flex;
        gap: 30px;
        justify-content: center;
      }

      .form-row div {
        flex: 1;
        width: 100%;
      }

      .error {
        color: red;
        font-size: 0.9em;
      }

      .required {
        color: red;
        font-weight: bold;
      }

      .alignment {
        display: flex;
        flex-direction: row;
        align-items: baseline;
      }

      .alignment input {
        margin-top: 15px;
        width: 5%;
      }

      .alignment label {
        width: 100%;
      }

      .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
        position: relative;
      }

      .navigation-buttons .prev {
        align-self: flex-start;
        visibility: hidden;
        width: auto;
        margin-right: auto;
      }

      .navigation-buttons .next,
      .navigation-buttons .submit {
        align-self: flex-end;
        width: auto;
      }

      input[type="submit"] {
        background-color: #e85b93;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
      }
      
    </style>

</head>
<body>
  <h1>Adoption Form</h1>

  <!-- Tab Navigation -->
  <div class="tabs">
    <div class="tab active" data-tab="applicant">Applicant</div>
    <div class="tab" data-tab="home-environment">Home Environment</div>
    <div class="tab" data-tab="pet-ownership">Pet Ownership</div>
    <div class="tab" data-tab="administrative">Administrative</div>
    <div class="tab" data-tab="submit">Submit</div>
  </div>

  <form id="adoption_form" method="POST" action="https://us09d.sheltermanager.com/service" accept-charset="utf-8" onsubmit="updateSpeciesList()">
    <!-- User Input Fields -->
    <div id="applicant" class="tab-content active">
      <!-- <div class="form-row">
        <div>
            <h3 for="f251">First Name <span class="required">*</span></h3>
            <input type="Text" id="f251" name="firstname_251" required>
        </div>
        <div>
            <h3 for="f281">Last Name <span class="required">*</span></h3>
            <input type="Text" id="f281" name="lastname_281" required>
        </div>
      </div> -->

      <!-- <h3 for="f284">Email <span class="required">*</span></h3>
      <input type="Email" id="f284" name="emailaddress_284" required>

      <h3 for="f286">Phone <span class="required">*</span></h3>
      <input type="tel" id="f286" name="mobiletelephone_286" required>

      <h3 for="f287">If applicable, please provide your Instagram handle:</h3>
      <input type="text" id="f287" name="instagramhandle_287"></input>

      <h3 for="f288">Address <span class="required">*</span></h3>
      <input type="text" id="f288" name="address_288" required></input> -->

      <!-- <div class="form-row">
        <div>
          <h3 for="f289">City <span class="required">*</span></h3>
          <input type="text" id="f289" name="city_289" required>
        </div>
        <div>
          <h3 for="f290">State <span class="required">*</span></h3>
          <select id="f290" name="state_290" required>
            <option value="" disabled selected>Select a state...</option>
          </select>
        </div>
        <div>
          <h3 for="f291">ZIP Code <span class="required">*</span></h3>
          <input type="number" id="f291" name="zipcode_291" required>
        </div>
      </div> -->

      <!-- <h3 for="f292">Applicant's Age <span class="required">*</span></h3>
      <input type="number" id="f292" name="age_292" required>

      <h3 for="f293">Applicant's Occupation <span class="required">*</span></h3>
      <input type="text" id="f293" name="occupation_293" required>

      <h3 for="f294">Applicant's Employer <span class="required">*</span></h3>
      <input type="text" id="f294" name="employer_294" required>

      <h3 for="f295">Have you adopted an animal from our program before? <span class="required">*</span></h3>
      <select id="f295" name="repeatadopter_295" required="required">
        <option value="" disabled selected>Select an option...</option>
        <option>Yes</option>
        <option>No</option>
      </select>

      <h3 for="f296">If you have adopted from us before, what was their name in our program? </h3>
      <input type="text" id="f296" name="adoptedpet_296"> -->

      <h3 for="f282">Select the animal you want to adopt: <span class="required">*</span></h3>
      <select type="Adoptable Animal" id="f282" name="animalname_282" required>
        <option value="">Select an animal...</option>
      </select>

      <!-- <h3 for="f326">What made this pet stand out? <span class="required">*</span></h3>
      <input type="text" id="f326" name="standout_326" required>

      <h3 for="f297">How did you find out about this pet? <span class="required">*</span></h3>
      <div id="f297" name="petdiscovery_297" required></div> -->
      
      <h3 for="f298">What type of animal are you interested in adopting? <span class="required">*</span></h3>
      <div id="f298" data-name="species_298" data-required="required">
        <div class="alignment">
          <input type="checkbox" id="f298_0" value="Puppy" /> 
          <label for="f298_0">Puppy</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_1" value="Adult dog" /> 
          <label for="f298_1">Adult dog</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_2" value="Senior dog" /> 
          <label for="f298_2">Senior dog</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_3" value="Kitten" /> 
          <label for="f298_3">Kitten</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_4" value="Adult cat" /> 
          <label for="f298_4">Adult cat</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_5" value="Senior cat" /> 
          <label for="f298_5">Senior cat</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_6" value="Livestock" /> 
          <label for="f298_6">Livestock</label>
        </div>
        <div class="alignment">
          <input type="checkbox" id="f298_7" value="Pocket pet" /> 
          <label for="f298_7">Pocket pet</label>
        </div>
      </div>      

      <h3 for="f299"> PLEASE NOTE: <span class="required">*</h3>
        <div style="margin: 0%;">
          Yes, we offer transport anywhere in the United States by ground or plane. We are happy to help coach our families through the transport process, but unfortunately, these fees cannot be waived or reduced as they are set by third parties. Transportation is $200 for one dog, or $150 each for multiple dogs.
        </div>
        <div class="alignment">
          <input type="radio" id="f299_0" name="transporttype_299" value="Yes! I understand interstate transport adds $200 onto the adoption cost." required>
          <label style="font-weight: bold;" for="f299_0">Yes! I understand interstate transport adds $200 onto the adoption cost.</label>
        </div>
        
        <div class="alignment">
          <input type="radio" id="f299_1" name="transporttype_299" value="I will come get my baby, so these services will not be needed.">
          <label style="font-weight: bold;" for="f299_1">I will come get my baby, so these services will not be needed.</label>
        </div>

      <div class="navigation-buttons">
        <button type="button" class="prev">Previous</button>
        <button type="button" class="next">Next</button>
      </div>
    </div>


    <!-- TAB 2: Home Environment -->
    <div id="home-environment" class="tab-content">
      <!-- Form Fields for Home Environment -->
      <!-- <h3 for="f300">My home is usually...</h3>
      <div class="alignment">
        <input type="radio" id="transport-yes" name="transport" value="Yes! I understand interstate transport adds $200 onto the adoption cost." required>
        <label for="transport-yes">Yes! I understand interstate transport adds $200 onto the adoption cost.</label>
      </div>
      
      <div class="alignment">
        <input type="radio" id="transport-no" name="transport" value="I will come get my baby, so these services will not be needed.">
        <label for="transport-no">I will come get my baby, so these services will not be needed.</label>
      </div> -->
      <div class="navigation-buttons">
        <button type="button" class="prev">Previous</button>
        <button type="button" class="next">Next</button>
      </div>
    </div>


    <!-- TAB 3: Pet Ownership -->
    <div id="pet-ownership" class="tab-content">
      <!-- Form Fields for Pet Ownership -->
      <!-- Add other form fields here -->
      <div class="navigation-buttons">
        <button type="button" class="prev">Previous</button>
        <button type="button" class="next">Next</button>
      </div>
    </div>


    <!-- TAB 4: Administrative -->
    <div id="administrative" class="tab-content">
      <!-- Form Fields for Administrative -->
      <!-- Add other form fields here -->
      <div class="navigation-buttons">
        <button type="button" class="prev">Previous</button>
        <button type="button" class="next">Next</button>
      </div>
    </div>

    
    <!-- TAB: 5 Submit -->
    <div id="submit" class="tab-content">
      <div id="form-message" class="error"></div>
      <div class="navigation-buttons">
        <button type="button" class="prev">Previous</button>
        <button type="submit" class="submit">Submit</button>
      </div>
    </div>


    <!-- Hidden Fields -->
    <input type="hidden" name="method" value="online_form_post">
    <input type="hidden" name="account" value="lwha">
    <input type="hidden" name="redirect" value="">
    <input type="hidden" name="retainfor" value="0">
    <input type="hidden" name="flags" value="Adoption Applicant">
    <input type="hidden" name="formname" value="AMBER TEST 2">
    <input type="hidden" id="species_list" name="species_298" value="" />
            
  </form>

  
  <script>

    // List of ways to discover pet
    function updateSpeciesList() {
    // Collect the selected checkboxes
    var selectedSpecies = [];
    var checkboxes = document.querySelectorAll('#f298 input[type="checkbox"]:checked');
    checkboxes.forEach(function(checkbox) {
      selectedSpecies.push(checkbox.value);
    });

    // Join the selected species into a single string
    var speciesList = selectedSpecies.join(', ');

    // Set the joined species list into the hidden input field
    document.getElementById('species_list').value = speciesList;
  }

    
    // Tab Navigation Logic
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const prevButtons = document.querySelectorAll('.prev');
    const nextButtons = document.querySelectorAll('.next');

    let currentTab = 0; // Tracks the active tab index

    function updateTabs() {
        // Update tab visibility
        tabs.forEach((tab, index) => {
            tab.classList.toggle('active', index === currentTab);
        });
        tabContents.forEach((content, index) => {
            content.classList.toggle('active', index === currentTab);
        });

        // Update button visibility
        prevButtons.forEach(btn => (btn.style.visibility = currentTab === 0 ? 'hidden' : 'visible'));
        nextButtons.forEach(btn => (btn.style.visibility = currentTab === tabs.length - 1 ? 'hidden' : 'visible'));
    }

    prevButtons.forEach(button => {
        button.addEventListener('click', () => {
            if (currentTab > 0) {
                currentTab--;
                updateTabs();
            }
        });
    });

    nextButtons.forEach(button => {
        button.addEventListener('click', () => {
            if (currentTab < tabs.length - 1) {
                currentTab++;
                updateTabs();
            }
        });
    });

    tabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
            currentTab = index;
            updateTabs();
        });
    });
    // Initialize Tab Navigation
    updateTabs();


    // // List of U.S. States
    // const states = [
    //   "Texas", "Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", 
    //   "Delaware", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", 
    //   "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", 
    //   "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", 
    //   "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", 
    //   "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Utah", "Vermont", "Virginia", 
    //   "Washington", "West Virginia", "Wisconsin", "Wyoming", "Washington DC", "ARMED FORCES AFRICA", 
    //   "CANADA", "EUROPE", "MIDDLE EAST", "ARMED FORCES AMERICA (EXCEPT CANADA)", "ARMED FORCES PACIFIC"
    // ];
    // const state_element = document.getElementById('f290');
    // // Generate the state options
    // states.forEach(state => {
    //   const option = document.createElement('option');
    //   option.value = state;
    //   option.textContent = state;
    //   state_element.appendChild(option);
    // });


    // Sample Animal Data Fetch
    async function populateDropdown() {
      const url = "https://us09d.sheltermanager.com/service?method=animal_view_adoptable_js&account=dm1425";
      const dropdown = document.getElementById("f282");

      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error("Failed to fetch animal data.");

        const text = await response.text();
        const match = text.match(/var adoptables = (\[.*?\]);/s);
        if (match) {
          const animals = JSON.parse(match[1]);
          dropdown.innerHTML = "<option value=''>Select an animal...</option>";
          animals.forEach(animal => {
            const option = document.createElement("option");
            option.value = animal.ANIMALNAME;
            option.textContent = animal.ANIMALNAME || "Unknown";
            dropdown.appendChild(option);
          });
        } else {
          throw new Error("Could not parse animal data.");
        }
      } catch (error) {
        console.error(error);
        dropdown.innerHTML = "<option value=''>No animals available</option>";
      }
    }
    // Initialize Dropdown
    window.onload = populateDropdown;

    
    // // List of ways to discover pet
    // const pet_discovery = [
    //   { id: "f297_0", value: "News: KBTX" },
    //   { id: "f297_1", value: "Radio: Zone 1150" },
    //   { id: "f297_2", value: "Radio: Candy95" },
    //   { id: "f297_3", value: "Radio: WTAW 1620" },
    //   { id: "f297_4", value: "Radio: Maverick 100.9" },
    //   { id: "f297_5", value: "Radio: Peace 107.7" },
    //   { id: "f297_6", value: "Petfinder/Adoptapet" },
    //   { id: "f297_7", value: "Google" },
    //   { id: "f297_8", value: "Social Media: Facebook" },
    //   { id: "f297_9", value: "Social Media: Instagram" },
    //   { id: "f297_10", value: "Social Media: TikTok" },
    //   { id: "f297_11", value: "Social Media: LinkedIn" },
    //   { id: "f297_12", value: "Community Event" },
    //   { id: "f297_13", value: "Word of Mouth" },
    //   { id: "f297_14", value: "Other" }
    // ];
    // const pet_discovery_element = document.getElementById("f297");
    // // Generate the discovery options
    // pet_discovery.forEach(option => {
    //   const div = document.createElement("div");
    //   div.classList.add("alignment");

    //   const input = document.createElement("input");
    //   input.type = "radio";
    //   input.id = option.id;
    //   input.name = "petdiscovery_297";
    //   input.value = option.value;
    //   input.required = true;

    //   const label = document.createElement("label");
    //   label.setAttribute("for", option.id);
    //   label.textContent = option.value;

    //   div.appendChild(input);
    //   div.appendChild(label);
    //   pet_discovery_element.appendChild(div);
    // });

    
    // // List of pet types
    // const pet_type = [
    //   { id: "f298_0", value: "Puppy", name: "species0_" },
    //   { id: "f298_1", value: "Adult dog", name: "species1_" },
    //   { id: "f298_2", value: "Senior dog", name: "species2_" },
    //   { id: "f298_3", value: "Kitten", name: "species3_" },
    //   { id: "f298_4", value: "Adult cat", name: "species4_" },
    //   { id: "f298_5", value: "Senior cat", name: "species5_" },
    //   { id: "f298_6", value: "Livestock", name: "species6_" },
    //   { id: "f298_7", value: "Pocket pet", name: "species7_" }
    // ];
    // const pet_type_element = document.getElementById("f298");
    // // Generate the pet type options
    // pet_type.forEach(option => {
    //   const div = document.createElement("div");
    //   div.classList.add("alignment");

    //   const input = document.createElement("input");
    //   input.type = "checkbox";
    //   input.id = option.id;
    //   input.name = option.name;
    //   input.setAttribute("data", option.value);
    //   input.value = option.value;

    //   const label = document.createElement("label");
    //   label.classList.add("asm-onlineform-checkboxlabel"); // Match the required class
    //   label.setAttribute("for", option.id);
    //   label.textContent = option.value;

    //   div.appendChild(input);
    //   div.appendChild(label);
    //   pet_type_element.appendChild(div);
    // });


  </script>
</body>
</html>
